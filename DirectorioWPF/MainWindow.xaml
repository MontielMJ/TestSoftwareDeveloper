<Window x:Class="DirectorioWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Sistema de Directorio" Height="600" Width="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Orientation="Horizontal" Background="#FF2C3E50" >
            <TextBlock Text="Sistema de Directorio" Foreground="White" FontSize="20" FontWeight="Bold"/>
        </StackPanel>

        <TabControl Grid.Row="1">
            <TabItem Header="Registrar Persona">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="Nombre:" Grid.Row="0" Grid.Column="0" Margin="5"/>
                    <TextBox x:Name="txtNombre" Grid.Row="0" Grid.Column="1" Margin="5" 
                           Text="{Binding Nombre, UpdateSourceTrigger=PropertyChanged}"/>

                    <TextBlock Text="Apellido Paterno:" Grid.Row="1" Grid.Column="0" Margin="5"/>
                    <TextBox x:Name="txtApellidoPaterno" Grid.Row="1" Grid.Column="1" Margin="5"
                           Text="{Binding ApellidoPaterno, UpdateSourceTrigger=PropertyChanged}"/>

                    <TextBlock Text="Apellido Materno:" Grid.Row="2" Grid.Column="0" Margin="5"/>
                    <TextBox x:Name="txtApellidoMaterno" Grid.Row="2" Grid.Column="1" Margin="5"
                           Text="{Binding ApellidoMaterno, UpdateSourceTrigger=PropertyChanged}"/>

                    <TextBlock Text="Identificación:" Grid.Row="3" Grid.Column="0" Margin="5"/>
                    <TextBox x:Name="txtIdentificacion" Grid.Row="3" Grid.Column="1" Margin="5"
                           Text="{Binding Identificacion, UpdateSourceTrigger=PropertyChanged}"/>

                    <Button Content="Guardar" Grid.Row="4" Grid.Column="1" Margin="5" 
                          HorizontalAlignment="Right" Width="100" Click="BtnGuardar_Click"/>

                    <!-- Validation Messages -->
                    <TextBlock x:Name="txtErrorNombre" Grid.Row="0" Grid.Column="1" Margin="5" 
                             Foreground="Red" VerticalAlignment="Bottom" Visibility="Collapsed"/>
                    <TextBlock x:Name="txtErrorApellidoPaterno" Grid.Row="1" Grid.Column="1" Margin="5"
                             Foreground="Red" VerticalAlignment="Bottom" Visibility="Collapsed"/>
                    <TextBlock x:Name="txtErrorIdentificacion" Grid.Row="3" Grid.Column="1" Margin="5"
                             Foreground="Red" VerticalAlignment="Bottom" Visibility="Collapsed"/>
                </Grid>
            </TabItem>

            <TabItem Header="Lista de Personas">
                <DataGrid x:Name="dgPersonas" AutoGenerateColumns="False" Margin="20">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                        <DataGridTextColumn Header="Nombre" Binding="{Binding Nombre}" Width="150"/>
                        <DataGridTextColumn Header="Apellido Paterno" Binding="{Binding ApellidoPaterno}" Width="150"/>
                        <DataGridTextColumn Header="Apellido Materno" Binding="{Binding ApellidoMaterno}" Width="150"/>
                        <DataGridTextColumn Header="Identificación" Binding="{Binding Identificacion}" Width="120"/>
                        <DataGridTemplateColumn Header="Acciones" Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Eliminar" Click="BtnEliminar_Click" 
                                          Tag="{Binding Id}" Margin="2"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>

            <TabItem Header="Registrar Venta">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="Persona:" Grid.Row="0" Grid.Column="0" Margin="5"/>
                    <ComboBox x:Name="cmbPersonas" Grid.Row="0" Grid.Column="1" Margin="5" 
                DisplayMemberPath="NombreCompleto" SelectedValuePath="Id" />

                    <TextBlock Text="Número Factura:" Grid.Row="1" Grid.Column="0" Margin="5"/>
                    <TextBox x:Name="txtNumeroFactura" Grid.Row="1" Grid.Column="1" Margin="5"/>

                    <TextBlock Text="Monto:" Grid.Row="2" Grid.Column="0" Margin="5"/>
                    <TextBox x:Name="txtMonto" Grid.Row="2" Grid.Column="1" Margin="5"/>

                    <TextBlock Text="Fecha:" Grid.Row="3" Grid.Column="0" Margin="5"/>
                    <DatePicker x:Name="dpFecha" Grid.Row="3" Grid.Column="1" Margin="5"/>

                    <TextBlock Text="Descripción:" Grid.Row="4" Grid.Column="0" Margin="5"/>
                    <TextBox x:Name="txtDescripcion" Grid.Row="4" Grid.Column="1" Margin="5" Height="60" 
               TextWrapping="Wrap" AcceptsReturn="True"/>

                    <Button Content="Registrar Venta" Grid.Row="5" Grid.Column="1" Margin="5" 
              HorizontalAlignment="Right" Width="120" Click="BtnRegistrarVenta_Click"/>
                </Grid>
            </TabItem>

            <TabItem Header="Consultar Ventas">
                <DataGrid x:Name="dgVentas" AutoGenerateColumns="False" Margin="20">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                        <DataGridTextColumn Header="Número Factura" Binding="{Binding NumeroFactura}" Width="120"/>
                        <DataGridTextColumn Header="Monto" Binding="{Binding Monto}" Width="80"/>
                        <DataGridTextColumn Header="Fecha" Binding="{Binding Fecha, StringFormat={}{0:dd/MM/yyyy}}" Width="100"/>
                        <DataGridTextColumn Header="Persona" Binding="{Binding NombrePersona}" Width="200"/>
                        <DataGridTextColumn Header="Identificación" Binding="{Binding IdentificacionPersona}" Width="120"/>
                        <DataGridTextColumn Header="Descripción" Binding="{Binding Descripcion}" Width="200"/>
                        <DataGridTemplateColumn Header="Acciones" Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Eliminar" Click="BtnEliminarVenta_Click" 
                              Tag="{Binding Id}" Margin="2"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
